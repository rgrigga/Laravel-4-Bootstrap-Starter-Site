function track_click(e,t){properties=$(e).attr("data-properties");if(properties==undefined||properties==null)properties={};t.preventDefault(),t.stopImmediatePropagation(),$(e).off("click.tracking"),logUsage($(e).attr("data-action"),$(e).attr("data-from"),properties,e),setTimeout(function(){doActualClick(e)},300)}function doActualClick(e){e!=undefined&&($(e).off("click.tracking"),$(e)[0].click(),$(e).on("click.tracking",function(e){track_click(this,e)}))}function logUsage(e,t,n,r){var i="undefined"==typeof _gaq,s=e.replace("_"," ");i?console.log("Record Event: "+e+" from "+t):_gaq.push(["_trackEvent","actions",e]),/^view (.+)/.test(s)&&$.isEmptyObject(n)&&(n={what:s.match(/^view (.+)/)[1]},s="view"),n=$.extend(t==null?{}:{from:t},n),mixpanel.track(s,n,function(e){console.log((e==1?"tracked":"failed")+":"+s)})}$(function(){$(".track").on("click.tracking",function(e){track_click(this,e)})});